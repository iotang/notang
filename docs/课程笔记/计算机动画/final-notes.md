# 考试大纲

## Wave 1

### 动画形成的视觉原理

利用了人的视觉残留特点。

## Wave 2

### 传统动画应用于三维计算机动画的基本原则

- 挤压和伸展 Squash and Stretch：变形的物体的体积不变。影响运动的因素包括质量、外力、材料属性、表面接触的位置等。
- 预期性 Anticipation：动画中的动作通常包括动作的准备、实际的动作和动作的完成三部分；预期性是第一部分。
- 布局 Staging：要考虑到观众。
- 连贯动作法与关键动作法 Straight-Ahead Action and Pose-to-Pose Action：这是两个不同的动画制作方式。后者是先画关键动作。
- 跟随动作与重叠动作 Follow-Through and Overlapping Action：“没有任何一种物体会突然停止，物体的运动是一个部分接着一个部分的。”
- 慢入和慢出 Slow In and Slow Out：所有物体自静止开始运动，逐渐加速；从运动状态回到静止状态，则逐渐减慢。
- 弧形动作 Arcs：在很多情况下角色的运动轨迹应该是比较自然的曲线，而不是直线。
- 附属运动 Secondary Motion：当角色进行主要动作时，附属于角色的部分也应该有动作。
- 掌握时序 Timing：动画的节奏。
- 夸张 Exaggeration：夸张手法用于强调某个动作。
- 吸引力 Appeal：角色需要有个性。
- 景深 Depth of Field
- 平衡及重量感 Balance and Weight

## Wave 4

### 万向节死锁的概念

当万向节中有两个轴的旋转平面平行的时候，就会发生万向节死锁问题。这个时候的万向节丢失了一个自由度。

### 旋转的四元数表示

一个四元数可以表示成 $w + i x + j y + k z$，其中 $i^2 = j^2 = k^2 = ijk = -1$。后三个 $(x, y, z)$ 可以描述成一个向量，$w$ 对应的可以描述成一个标量。也就是说一个四元数还可以表示成 $(w, \mathbf{v})$。四元数 $q = w + i x + j y + k z$ 的共轭 $q^{-1} = w - i x - j y - k z$。

四元数描述的是四维空间上的旋转；可以理解成两次和两个单位圆相关的旋转。

使用四元数进行三维旋转的时候，形式可以描述成 $\mathbf{v}' = q \mathbf{v} q^{-1}$（$\mathbf{v}$ 的张量部分是 0）。其中 $q = \cos (\theta / 2) + \sin (\theta / 2) (xi + yj + zk)$，$\theta$ 是要旋转的角度，旋转所在的单位圆垂直于单位向量 $(x, y, z)$，正方向用右手螺旋定则确定。

然后旋转的中间过程直接插四元数的值就可以了。

## Wave 5

### 2D Shape Blending 涉及哪两个子问题？

顶点的对应关系问题和顶点的插值问题。

### 基于内在形状插值的多边形渐变方法的基本思想

使用乌龟几何，用拉格朗日乘数法优化。

乌龟几何：通过边长和有向角来以一个一个顶点定义多边形。对边长和顶点角进行插值可以生成渐变帧。

拉格朗日乘数法优化用于处理插值后起始点和终止点不在同一位置的问题。

### Edge Tweaking 思想

用于解决中间多边形不封闭的问题。保持插值的顶点角不变，适当调整插值得到的边长：$L_i = (1 - t) L_{A_i} + t L_{B_i} + S_i$，通过拉格朗日乘数法限制多边形封闭把调整量 $S_i$ 插出来，并且让 $\sum_{i=0}^m \frac{S_i^2}{L_{AB_i}^2}$；其中 $L_{AB_i} = \max (|L_{A_i} - L_{B_i}|, 0.0001 \times \max (|L_{A_i} - L_{B_i}|))$。

## Wave 6

### 图像 morphing 的原理

首先用简单的几何元建立图像特征之间的对应关系，然后由这些特征对应关系计算出 morphing 所需的几何变换，几何变换定义了两幅图像上点之间的几何对应关系。

满射 $C_0$ 把第一幅图像的几何形状映射为第二幅图像的几何形状，满射 $C_1$ 则反过来。需要两个映射的原因是图像点与点之间的对应关系不一定是一一对应。

图像变形对齐后再对颜色进行插值，得到中间帧图像。

### 基于网格的图象 morphing 原理

在源图像 $I_s$ 中，放置曲面网格 $M_s$，$M_s$ 指定了控制顶点的坐标。在目标图像 $I_d$ 中，放置网格 $M_d$，$M_d$ 指定了 $M_s$ 在目标图像的对应点。

曲面 $M_s$ 和 $M_d$ 用来定义把源图像的所有点映射到目标图像的空间变换，它们的拓扑关系相同。

中间帧的图像生成步骤：

1. 线性插值网格 $M_s$ 和 $M_d$，得到网格 $M$；
2. 应用由网格 $M_s$ 和 $M$ 定义的变换，使源图像 $I_s$ 扭曲变形到 $I_0$；
3. 应用由网格 $M_d$ 和 $M$ 定义的变换，使目标图像 $I_d$ 变形到 $I_1$；
4. 对图像 $I_0$ 和 $I_1$ 进行线性插值，得到中间帧图像。

### 基于线对的图象 morphing 方法

基于线对的方法采用逆向映射。其思想是逐个扫描目标图象的像素，根据其位置采样源图像。这样的话目标图象中的每一个像素都可以在源图象中找到
对应值。

在源图像中定义一条有向线段，再在目标图像中定义一条有向线段，则映射把一条直线映射为另一条直线。

设两幅图像分别为 $I_s$ 和 $I_d$，先在两幅图像中定义控制变形的对应直线对，通过插值得到中间图像 $I$ 的直线。由 $I_s \rightarrow I$ 的直线对变换可以得到一副变形图 $I_1$，由 $I_d \rightarrow I$ 的直线对变换可以得到 $I_2$。对交溶参数作动画，把 $I_1$ 和 $I_2$ 进行交溶处理可以得到中间的变形图像 $I$。

基于线对特征法的优点是直观，缺点是有可能生成一些意料之外的图像。

## Wave 7

### 二、三维形状渐变各有什么优缺点？

二维：

优点：是一种达到特殊视觉效果的有效方法；可以让人产生神奇的三维形状改变的错觉，可以避免复杂的三维造型过程。

缺点：可能生成一些意料之外的图像（线对特征法）；物体没有三维几何信息，不能进行几何变换。

三维：

优点：能生成更逼真和生动的特技效果，且得到的中间帧是物体的模型而不是图像，运用范围更广。

缺点：物体之间的对应关系很难建立，而且该方法对物体的几何表示也相当苛刻。

### 基于星形物体的多面体 morphing 方法

星形物体，是指物体中至少有一点，从该点可见多面体的所有顶点。

合并一对三维多面体物体模型的拓扑结构，使它们拥有相同的顶点、边、面网络结构，然后对相应的顶点进行插值。

通过合并拓扑结构将一个物体的形状变换为另一个物体的形状可以分为两步：

1. 建立源物体与目标物体上的点的对应关系（对应问题）；
2. 插值对应的点（插值问题）。

对于亏格为零（没有洞）的两个多面体，它们都同构于球。把它们都投影到单位球面上，然后将投影在单位球面上的两个拓扑结构合并在一起构成一个新的拓扑结构，再将新的拓扑结构映射回原来的两个多面体，即建立好了相应的点对关系。

一旦顶点对应关系建立以后，通常采用线性插值或 Hermite 插值来插值相应的顶点。

### 基于体表示的三维 morphing 方法

思想：给定源物体 $S$ 和目标物体 $T$，首先根据指定的对应特征生成一个空间变换，该变换使给定的两个体扭曲变形，达到几何对齐的目的；然后对得到的两个扭曲变形体进行混合。

混合方法：这些变换把 $S$ 中的特征平移、旋转、和比例缩放后，分别与 $T$ 中对应特征的位置、朝向和大小相匹配。对两个体素的颜色和不透明度进行交溶处理，然后对混合后的体素进行绘制。

优点：与物体的几何和拓扑结构无关；提供了一种统一的处理方法（几何表示的物体都可以转化成体表示）。

缺点：走样现象严重，精度没有基于几何表示的好；几何模型转换为体素表示的计算时间较费。

## Wave 8

粒子系统的基本思想是将许多简单形状的微小粒子作为基本元素聚集起来形成一个不规则模糊物体。

### 粒子系统的基本原理

#### 粒子系统的作用

模拟不规则自然景物。

#### 粒子系统基于的假设

- 粒子一般与其它粒子不碰撞
- 除非处于聚集状态，粒子不向其它粒子投射阴影
- 粒子只向其它环境投射阴影
- 粒子不反射光
- 粒子通常有有限的生命周期

#### 每一帧中的步骤

每个粒子均经历出生，成长，衰老和死亡的过程。生成粒子系统的某一帧画面的基本步骤是：

- 生成新的粒子并加入系统中；
- 赋予每一新粒子以一定的属性；
- 删除那些已经超过其生命周期的粒子；
- 根据粒子的动态属性对粒子进行移动和变换；
- 绘制并显示由有生命的粒子组成的图形。

#### 粒子生成

对于每一帧，根据一个控制的随机过程生成粒子：用户可以控制每帧的平均粒子数和其概率分布；粒子数可以是时间的函数。

#### 粒子的属性

位置、速度、大小、周期、质量、力加速器、生命周期、绘制属性、……

## Wave 9

### Boids 模型的三条原则，每条原则的含义

Boid 是一个模拟的类似于鸟一样的物体；它们会组合成一个有点像鸟群的集合。

优先级递减的群体模拟三大原则：

1. 碰撞避免原则：避免与相邻的群体成员相碰。
2. 速度匹配原则：尽量保持与周围邻居群体成员的速度匹配。
3. 群体合群原则：群体成员尽量靠近。

### Reynolds 导航方法

#### 寻找和逃离

#### 追逐和躲避

假设猎物在预测区间 $T$ 内不会转向。

猎物在将来的位置可通过把它的当前速度乘以 $T$，并把该偏移量与当前位置相加来得到。

#### 偏移的追逐

沿着一条接近目标的路径追逐，但是不直接进入移动的目标。（一个使用场景是战斗机进行空中扫射。）

#### 到达

角色将放慢速度，直到停止，并与目标位置重合。

#### 障碍避免

在该角色前面，保证有一个假想圆柱的自由空间。返回避免最有威胁障碍物的导航值。

#### 徘徊

角色前方有一个大圆，大圆上面有一个小圆。大圆对导航进行约束，小圆对导航的随机偏移量进行约束。

#### 路径跟随

沿着一条路径移动角色，并同时保持在脊柱线的指定半径内。对沿当前方向一段距离之后的位置进行脊柱线上的投影，大于路径半径的时候进行修正：对投影过去的点进行寻找行为。

#### 流场跟随行为

- 假设运动区域已经有一个速度流场；
- 估算角色将来的位置并计算在这点的流场；
- 得到的速度 $\mathrm{F}$ 即为我们期望的速度，导航方向 $\mathrm{S}$ 为期望速度和当前速度的差。

#### 跟随领导

- 如果一个跟随成员发现自己处于领导前面的一个矩形区域，它会横向远离领导者的路径；
- 否则，到达目标为领导后面的一个偏移点；
- 跟随成员采用分离行为来避免相互拥挤。

## Wave 10
